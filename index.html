<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Riddle Advent Calendar — Front Page</title>
  <style>
    :root {
      --bg1: #0f1724;
      --bg2: #1b2a4a;
      --accent: #9e0000;
      --accent-2: #ff6b6b;
      --card: #ffffffcc;
      --glass: rgba(255, 255, 255, 0.06);
      --border: rgba(82, 82, 82, 0.24);
      --text: #363636;
      --shadow: 0 8px 30px rgba(2, 6, 23, 0.6);
      --font-sans: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Page layout */
    * {
      box-sizing: border-box
    }

    html,
    body {
      height: 100%
    }

    body {
      position: relative;
      margin: 0;
      font-family: var(--font-sans);
      background-image: url('./images/frontPageBackground.jpg');
      backdrop-filter: blur(2px);
      background-size: 100% auto;
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 32px;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.55);
      z-index: -1;
      pointer-events: none;
    }

    /* Center card */
    .card {
      width: 100%;
      max-width: 1100px;
      background-color: rgba(255, 255, 255, 0.8);
      border-radius: 18px;
      padding: 28px;
      box-shadow: var(--shadow);
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.04);

    }

    .header {
      display: flex;
      gap: 16px;
      align-items: center;
      justify-content: space-between;
      position: relative;
      z-index: 2;
    }

    .left-controls {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    .lang-toggle {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      padding: 8px 10px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: 600;
    }

    .title {
      margin-top: 14px;
      margin-bottom: 10px;
      z-index: 2;
    }

    h1 {
      margin: 0;
      font-size: clamp(20px, 3.8vw, 32px);
      letter-spacing: -0.6px;
      color: var(--text);
    }

    p.lead {
      margin: 8px 0 18px 0;
      color: #f3f6ff;
      opacity: 0.92;
      line-height: 1.45;
      max-width: 72ch;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 360px;
      gap: 20px;
      align-items: start;
    }

    /* big button */
    .big-action {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      font-weight: 800;
      font-size: clamp(18px, 2.6vw, 22px);
      padding: 20px;
      border-radius: 14px;
      background: linear-gradient(90deg, rgba(255, 255, 255, 0.06), rgba(255, 255, 255, 0.02));
      border: 2px solid rgba(255, 255, 255, 0.06);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.25);
      color: var(--text);
      text-decoration: none;
      transition: transform .14s ease, box-shadow .14s ease;
    }

    .big-action:hover {
      transform: translateY(-2px);
      box-shadow: 0 20px 50px rgba(0, 0, 0, 0.35);
    }

    .big-action .btn-inner {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    /* left column content */
    .story {
      padding: 18px;
      border-radius: 12px;
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      border: 1px solid var(--border);
    }

    .credits {
      margin-top: 14px;
      font-size: 13px;
      color: var(--text);
    }

    /* scoreboard on right */
    .scoreboard {
      background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
      border-radius: 12px;
      padding: 14px;
      border: 1px solid rgba(255, 255, 255, 0.03);
    }

    .scoreboard h3 {
      margin: 6px 0 12px 0;
      font-size: 16px;
      color: var(--text);
    }

    table.scores {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
    }

    table.scores th,
    table.scores td {
      text-align: left;
      padding: 8px 6px;
      border-bottom: 1px dashed rgba(255, 255, 255, 0.03);
      color: var(--text);
    }

    table.scores tbody tr:first-child td {
      font-weight: 700;
      color: var(--accent)
    }

    .controls {
      margin-top: 12px;
      display: flex;
      gap: 8px;
      flex-direction: column;
    }

    input[type="text"],
    input[type="number"] {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      outline: none;
      width: 100%;
    }

    .form-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
    }

    .small-btn {
      background: var(--glass);
      padding: 8px 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      color: var(--text);
      cursor: pointer;
      font-weight: 700;
    }

    .small-btn.conf {
      background: rgba(116, 226, 103, 0.4);
      color: #57bc52;
      border-color: rgba(67, 195, 52, 0.57);
    }

    /* responsive */
    @media (max-width:920px) {
      .main-grid {
        grid-template-columns: 1fr;
      }

      .scoreboard {
        order: 2;
        margin-top: 10px;
      }

      .big-action {
        width: 100%;
        justify-content: center
      }
    }
  </style>
</head>

<body>
  <div class="card">
    <div class="header">
      <div class="left-controls">
        <button class="lang-toggle" id="langToggle" title="Switch language / Sprache wechseln">EN /
          DE</button>
      </div>
    </div>

    <div class="title" style="z-index:1000">
      <h1 id="pageTitle">Riddle Advent Calendar</h1>
    </div>

    <div class="main-grid">
      <section class="story">
        <a class="big-action" id="openCalendar" href="julekalender.html" role="button">
          Open the Advent Calendar
        </a>

        <div style="margin-top:18px;">
          <h3 id="whoTitle" style="margin:0 0 6px 0;">Welcome</h3>
          <div id="storyText">
            <!-- bilingual copy inserted by JS -->
          </div>

          <p class="credits" style="margin-top:14px">
            <strong data-i18n="greeting">Eure Wichtel / Your Secret Santas</strong><br />
            Ines, Nikolai, Tim
          </p>
        </div>
      </section>

      <div class="scoreboard">
        <h3 id="scoreTitle">Scoreboard</h3>

        <table class="scores">
          <thead>
            <tr>
              <th>#</th>
              <th>Player</th>
              <th style="text-align:right">Points</th>
            </tr>
          </thead>
          <tbody id="scoreBody">
          </tbody>
        </table>
        <p id="scoreDesc" style="margin-top:8px; font-size:12px; opacity:0.8">
          Submit answers to get points. Get more points when answering on the day of.
        </p>

        <div class="controls" style="margin-top:32px;">
          <label style="font-size:12px;opacity:0.8;font-weight:700;">Enter your name for custom names in the
            riddles</label>
          <div style="display: flex; width: 100%;">
            <input type="text" id="playerName" placeholder="Name" />
            <div class="small-btn" id="nameEnter">Enter</div>

          </div>
        </div>


      </div>
    </div>

  </div>
  <script src="./scores.js"></script>
  <script>
    // bilingual texts (exact texts from user)
    const texts = {
      DE: {
        title: "Rätsel Adventskalender",
        intro: `Es ist wieder soweit – die Weihnachtszeit steht vor der Tür! Unser Adventskalender erstrahlt in voller Pracht und wartet darauf, von euch geöffnet zu werden.
Jeden Tag erwarten euch spannende Aufgaben und Rätsel. Oben links könnt ihr die Webseite neu laden, um das Tagesrätsel in seiner originalen Form zu sehen. Du kannst den Adventskalender auch in Englisch haben.
Habt keine Scheu, mich zu fragen, falls ihr einmal nicht weiterkommt. Schickt mir eure Antworten gerne zu – wer die Aufgaben am selben Tag einsendet, erhält sogar mehr Punkte!
Am Ende wird die Person mit den meisten Punkten mit einer freudigen Überraschung belohnt. Viel Spaß beim Rätseln und eine wundervolle Adventszeit!

Eure Wichtel Ines, Nikolai, Tim`,
        openBtn: "Adventskalender öffnen",
        reload: "Neu laden",
        greeting: "Eure Wichtel"
      },
      EN: {
        title: "Riddle Advent Calendar",
        intro: `The festive season is upon us! Our Advent calendar is shining bright and ready to be opened by you.
Every day brings exciting challenges and puzzles. You can refresh the webpage at the top left corner to see the daily puzzle in its original form. You can also change the language to English or German.
Don’t hesitate to ask me if you get stuck at any point. Feel free to send me your answers — you’ll earn more points if you submit them on the same day!
At the end, the person with the highest score will be rewarded with a delightful surprise. Have fun solving the puzzles and enjoy this wonderful Advent season!

Your Secret Santas, Ines, Nikolai, Tim`,
        openBtn: "Open the Advent Calendar",
        reload: "Reload",
        greeting: "Your Secret Santas"
      }
    };

    // initial language
    let currentlang = localStorage.getItem('kalanderlangstatus') ?? 'EN'
    localStorage.setItem('kalanderlangstatus', currentlang)

    const toggleLang = () => {
      if (currentlang == "EN") {
        currentlang = "DE"
      } else {
        currentlang = "EN"
      }
      localStorage.setItem('kalanderlangstatus', currentlang)
    }

    const pageTitle = document.getElementById('pageTitle');
    const openCalendar = document.getElementById('openCalendar');
    const langToggle = document.getElementById('langToggle');
    const storyText = document.getElementById('storyText');
    const greetingEl = document.querySelector('[data-i18n="greeting"]');



    const applyLang = () => {
      const t = texts[currentlang];
      pageTitle.textContent = t.title;
      openCalendar.textContent = t.openBtn;
      greetingEl.textContent = t.greeting + ',';
      storyText.textContent = t.intro;
    }
    applyLang();

    langToggle.addEventListener('click', () => {
      toggleLang();
      applyLang();
    });


    const scoreKey = 'advent_scoreboard_v1';

    const renderScores = () => {
      const list = scores;
      list.sort((a, b) => b.points - a.points);
      const tbody = document.getElementById('scoreBody');
      tbody.innerHTML = '';
      if (list.length === 0) {
        tbody.innerHTML = '<tr><td colspan="3" style="opacity:0.75">No scores yet</td></tr>';
        return;
      }
      list.forEach((row, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `<td style="width:28px">${i + 1}</td>
                      <td>${row.name}</td>
                      <td style="text-align:right; font-weight:700">${row.points}</td>`;
        tbody.appendChild(tr);
      });
    }

    renderScores();

    openCalendar.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') { openCalendar.click(); e.preventDefault(); }
    });

    
    const nameInput = document.getElementById('playerName')
    const enterDiv = document.getElementById('nameEnter')
    const collectName = () => {
      if (nameInput.value) {
        localStorage.setItem('playerName', nameInput.value);
        enterDiv.classList.add('conf');
      }
    }

    enterDiv.addEventListener('click', collectName)
  </script>
</body>

</html>


<!-- i idiotically baked the orientation check into the js and set each individual element class based on ori, but i realize i should have just used css @media. Can you go in and change all of the js code that deals with the orientation and set it with CSS. -->